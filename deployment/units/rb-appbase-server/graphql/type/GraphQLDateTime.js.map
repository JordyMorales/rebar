{"version":3,"sources":["../../../../../units/rb-appbase-server/graphql/type/GraphQLDateTime.js"],"names":["coerceDate","value","Date","Error","JSON","stringify","isNaN","getTime","toJSON","parseLiteral","ast","kind","Kind","STRING","GraphQLError","result","GraphQLScalarType","name","description","serialize","parseValue"],"mappings":";;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,SAASA,UAAT,CAAqBC,KAArB,EAA6B;AAC3BA,EAAAA,KAAK,GAAG,IAAIC,IAAJ,CAAUD,KAAV,CAAR;AACA,MAAK,EAAGA,KAAK,YAAYC,IAApB,CAAL;AACE;AACA,UAAM,IAAIC,KAAJ;AACJ,+DAA2DC,IAAI,CAACC,SAAL,CAAgBJ,KAAhB,CADvD,CAAN;;;AAIF,MAAKK,KAAK,CAAEL,KAAK,CAACM,OAAN,EAAF,CAAV,EAAgC,MAAM,IAAIJ,KAAJ,CAAW,uCAAX,CAAN;;AAEhC,SAAOF,KAAK,CAACO,MAAN,EAAP;AACD;;AAED,SAASC,YAAT,CAAuBC,GAAvB,EAA6B;AAC3B,MAAKA,GAAG,CAACC,IAAJ,KAAaC,eAAKC,MAAvB;AACE,QAAM,IAAIC,mBAAJ,CAAkB,6DAA6DJ,GAAG,CAACC,IAAnF,EAAyF;AAC7FD,EAAAA,GAD6F,CAAzF,CAAN;;;AAIF,MAAIK,MAAM,GAAG,IAAIb,IAAJ,CAAUQ,GAAG,CAACT,KAAd,CAAb;AACA,MAAKK,KAAK,CAAES,MAAM,CAACR,OAAP,EAAF,CAAV,EAAiC,MAAM,IAAIO,mBAAJ,CAAkB,2BAAlB,EAA+C,CAAEJ,GAAF,CAA/C,CAAN;;AAEjC,MAAKA,GAAG,CAACT,KAAJ,KAAcc,MAAM,CAACP,MAAP,EAAnB;AACE,QAAM,IAAIM,mBAAJ;AACJ,4EADI;AAEJ,GAAEJ,GAAF,CAFI,CAAN;;;AAKF,SAAOK,MAAP;AACD,C;;AAEc,IAAIC,0BAAJ,CAAsB;AACnCC,EAAAA,IAAI,EAAE,UAD6B;AAEnCC,EAAAA,WAAW,EAAE,+CAFsB;AAGnCC,EAAAA,SAAS,EAAEnB,UAHwB;AAInCoB,EAAAA,UAAU,EAAEpB,UAJuB;AAKnCS,EAAAA,YAAY,EAAEA,YALqB,EAAtB,C","sourcesContent":["// @flow\n\nimport { GraphQLScalarType } from 'graphql'\nimport { GraphQLError } from 'graphql/error'\nimport { Kind } from 'graphql/language'\n\n// The code in this file is largely modified version of:\n// https://github.com/soundtrackyourbrand/graphql-custom-datetype/blob/master/datetype.js\n\nfunction coerceDate( value ) {\n  value = new Date( value )\n  if ( !( value instanceof Date ) )\n    // Is this how you raise a 'field error'?\n    throw new Error(\n      'Field error: value is not an instance of Date, value =' + JSON.stringify( value ),\n    )\n\n  if ( isNaN( value.getTime() ) ) throw new Error( 'Field error: value is an invalid Date' )\n\n  return value.toJSON()\n}\n\nfunction parseLiteral( ast ) {\n  if ( ast.kind !== Kind.STRING )\n    throw new GraphQLError( 'Query error: Can only parse strings to dates but got a: ' + ast.kind, [\n      ast,\n    ])\n\n  let result = new Date( ast.value )\n  if ( isNaN( result.getTime() ) ) throw new GraphQLError( 'Query error: Invalid date', [ ast ])\n\n  if ( ast.value !== result.toJSON() )\n    throw new GraphQLError(\n      'Query error: Invalid date format, only accepts: YYYY-MM-DDTHH:MM:SS.SSSZ',\n      [ ast ],\n    )\n\n  return result\n}\n\nexport default new GraphQLScalarType({\n  name: 'DateTime',\n  description: 'Scalar type for storing date-time information',\n  serialize: coerceDate,\n  parseValue: coerceDate,\n  parseLiteral: parseLiteral,\n})\n"],"file":"GraphQLDateTime.js"}