{"version":3,"sources":["../../../../../units/rb-appbase-server/graphql/type/ViewerType.js"],"names":["GraphQLObjectType","name","interfaces","NodeInterface","isTypeOf","object","User","fields","id","User_IsAnonymous","type","GraphQLBoolean","resolve","obj","defaultPersister","uuidEquals","uuidNull","UserToken2","GraphQLString","User_DisplayName","User_PrimaryEmail","User_PrimaryPhone","UserPermissionForObjects","UserPermissionForObjectsConnection","connectionType","args","connectionArgs","UserPermissionForObject_ObjectType","GraphQLNonNull","context","rootValue","objectManager","arr","getObjectList_async","UserPermissionForObject","UserPermissionForObjectType","GraphQLID","parent","local_id","uuidFromString","getOneObject_async","_materialized_view","UserQuotaForObjects","UserQuotaForObjectsConnection","UserQuotaForObject","UserQuotaForObjectType","_ViewerFields"],"mappings":"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","sourcesContent":["// @flow\n\nimport {\n  GraphQLBoolean,\n  GraphQLID,\n  GraphQLNonNull,\n  GraphQLString,\n  GraphQLObjectType,\n} from 'graphql'\nimport { connectionArgs, connectionFromArray, fromGlobalId, globalIdField } from 'graphql-relay'\n\nimport defaultPersister from '../../../_configuration/rb-base-server/graphql/defaultPersister'\nimport NodeInterface from '../NodeInterface'\nimport _ViewerFields from '../../../_configuration/rb-base-server/graphql/_ViewerFields'\nimport User from '../model/User'\n\nimport UserPermissionForObjectsConnection from './UserPermissionForObjectsConnection'\nimport UserPermissionForObjectType from './UserPermissionForObjectType'\nimport UserQuotaForObjectsConnection from './UserQuotaForObjectsConnection'\nimport UserQuotaForObjectType from './UserQuotaForObjectType'\n\nexport default new GraphQLObjectType({\n  name: 'Viewer',\n  interfaces: [ NodeInterface ],\n  isTypeOf: object => object instanceof User,\n  fields: {\n    id: globalIdField( 'Viewer' ),\n    User_IsAnonymous: {\n      type: GraphQLBoolean,\n      resolve: obj => defaultPersister.uuidEquals( obj.id, defaultPersister.uuidNull() ),\n    },\n    UserToken2: { type: GraphQLString, resolve: obj => obj.UserToken2 },\n    User_DisplayName: {\n      type: GraphQLString,\n      resolve: obj => obj.User_DisplayName,\n    },\n    User_PrimaryEmail: { type: GraphQLString, resolve: obj => obj.User_PrimaryEmail },\n    User_PrimaryPhone: {\n      type: GraphQLString,\n      resolve: obj => obj.User_PrimaryPhone,\n    },\n\n    UserPermissionForObjects: {\n      type: UserPermissionForObjectsConnection.connectionType,\n\n      args: {\n        ...connectionArgs,\n        UserPermissionForObject_ObjectType: { type: new GraphQLNonNull( GraphQLString ) },\n      },\n\n      resolve: async( obj, { ...args }, context, { rootValue: objectManager }) => {\n        const { UserPermissionForObject_ObjectType } = args\n        const arr = await objectManager.getObjectList_async( 'UserPermissionForObject', {\n          UserPermissionForObject_ObjectType,\n        })\n        return connectionFromArray( arr, args )\n      },\n    },\n\n    UserPermissionForObject: {\n      type: UserPermissionForObjectType,\n\n      args: { ...{ id: { type: GraphQLID } } },\n\n      resolve: async( parent, { id }, context, { rootValue: objectManager }) => {\n        const local_id = objectManager.uuidFromString(\n          'UserPermissionForObject',\n          fromGlobalId( id ).id,\n        )\n\n        // TODO [1 Alberta][server] Materialized view UserPermissionForObject_by_ID does not exist\n        return await objectManager.getOneObject_async( 'UserPermissionForObject', {\n          id: local_id,\n          _materialized_view: 'UserPermissionForObject_by_ID',\n        })\n      },\n    },\n\n    UserQuotaForObjects: {\n      type: UserQuotaForObjectsConnection.connectionType,\n\n      args: { ...connectionArgs },\n\n      resolve: async( obj, { ...args }, context, { rootValue: objectManager }) => {\n        const arr = await objectManager.getObjectList_async( 'UserQuotaForObject', {})\n        return connectionFromArray( arr, args )\n      },\n    },\n\n    UserQuotaForObject: {\n      type: UserQuotaForObjectType,\n\n      args: { ...{ id: { type: GraphQLID } } },\n\n      resolve: async( parent, { id }, context, { rootValue: objectManager }) => {\n        const local_id = objectManager.uuidFromString( 'UserQuotaForObject', fromGlobalId( id ).id )\n\n        return await objectManager.getOneObject_async( 'UserQuotaForObject', {\n          id: local_id,\n\n          // TODO [1 Alberta][server] Materialized view UserQuotaForObject_by_ID does not exist\n          _materialized_view: 'UserQuotaForObject_by_ID',\n        })\n      },\n    },\n\n    ..._ViewerFields,\n  },\n})\n"],"file":"ViewerType.js"}