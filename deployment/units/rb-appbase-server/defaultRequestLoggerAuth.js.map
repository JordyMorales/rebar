{"version":3,"sources":["../../../units/rb-appbase-server/defaultRequestLoggerAuth.js"],"names":["defaultrequestLoggerAuth","req","clientIP","userSession","logLevel","debugWriteToLogServerRequestAuth"],"mappings":";;AAEA;AACA;AACA,yD,8FAJA;;AAMe,SAASA,wBAAT,CAAkC;AAC/CC,EAAAA,GAD+C;AAE/CC,EAAAA,QAF+C;AAG/CC,EAAAA,WAH+C,EAAlC;AAIZ;AACD,MAAIC,QAAQ,GAAG,IAAf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACE;AACE,IAAEH,GAAF,EAAOC,QAAP,EAAiBC,WAAjB,EADF;AAEEE,yCAFF,CADF;;AAKE;AACAD,IAAAA,QAAQ,GAAG,MAAX;AACD;;AAED,MAAIA,QAAJ,EAAc;AACZ,sBAAIA,QAAJ,EAAc,gCAAd,EAAgD;AAC9CH,MAAAA,GAD8C;AAE9CC,MAAAA,QAF8C;AAG9CC,MAAAA,WAH8C,EAAhD;;AAKD;AACF","sourcesContent":["// @flow weak\n\nimport { debugWriteToLogServerRequestAuth } from '../_configuration/debug'\nimport log from '../rb-base-server/log'\nimport { matchObject } from '../rb-base-universal/template'\n\nexport default function defaultrequestLoggerAuth({\n  req,\n  clientIP,\n  userSession,\n}) {\n  let logLevel = null\n\n  // IDEA: Audit errors for Auth and decide which ones to log. For instasnce, 401 is a bad idea.\n  // // If there is an error, log it as an error\n  // if( requestAndResponse.response.indexOf( '\"errors\": [' ) > 0 )\n  //   logLevel = 'error'\n  // Otherwise, if it is a trace, log it as info\n  //else\n  if (\n    matchObject(\n      { req, clientIP, userSession },\n      debugWriteToLogServerRequestAuth,\n    )\n  ) {\n    logLevel = 'info'\n  }\n\n  if (logLevel) {\n    log(logLevel, 'rb-appbase-server auth request', {\n      req,\n      clientIP,\n      userSession,\n    })\n  }\n}\n"],"file":"defaultRequestLoggerAuth.js"}