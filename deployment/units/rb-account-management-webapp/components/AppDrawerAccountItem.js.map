{"version":3,"sources":["../../../../units/rb-account-management-webapp/components/AppDrawerAccountItem.jsx"],"names":["styles","theme","formControl","paddingLeft","spacing","paddingRight","loginButtonContainer","AppDrawerAccountItem","React","Component","constructor","props","context","_handle_onClick_Login","setState","loginDialogIsOpen","_handle_onChange_Account","event","operation","target","value","onClick","_handle_Login_Close","_handle_Login_NewUser","state","UNSAFE_componentWillMount","componentWillUnmount","render","classes","Viewer","User_IsAnonymous","User_DisplayName"],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA,oE;;AAEA;;AAEA,MAAMA,MAAM,GAAIC,KAAD,KAAY;AACzBC,EAAAA,WAAW,EAAE;AACXC,IAAAA,WAAW,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADF;AAEXC,IAAAA,YAAY,EAAEJ,KAAK,CAACG,OAAN,CAAc,CAAd,CAFH,EADY;;AAKzBE,EAAAA,oBAAoB,EAAE;AACpBH,IAAAA,WAAW,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADO;AAEpBC,IAAAA,YAAY,EAAEJ,KAAK,CAACG,OAAN,CAAc,CAAd,CAFM,EALG,EAAZ,CAAf;;;;AAWA;;AAEA,MAAMG,oBAAN,SAAmCC,eAAMC;;;;;AAKvC;AACAC,EAAAA,WAAW,CAACC,KAAD,EAAgBC,OAAhB,EAAiC;AAC1C,UAAMD,KAAN,EAAaC,OAAb,EAD0C;;;;;;;;;;;;;;;;;;AAmB5CC,IAAAA,qBAnB4C,GAmBpB,MAAM;AAC5B,WAAKC,QAAL,CAAc,EAAEC,iBAAiB,EAAE,IAArB,EAAd;AACD,KArB2C;;AAuB5CC,IAAAA,wBAvB4C,GAuBhBC,KAAD,IAAW;AACpC,YAAMC,SAAS,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAA/B;;AAEA,UAAIF,SAAS,KAAK,SAAlB,EAA6B;AAC3B,aAAKP,KAAL,CAAWU,OAAX,CAAmB,eAAnB;AACD,OAFD,MAEO,IAAIH,SAAS,KAAK,OAAlB,EAA2B;AAChC,aAAKJ,QAAL,CAAc,EAAEC,iBAAiB,EAAE,IAArB,EAAd;AACD,OAFM,MAEA,IAAIG,SAAS,KAAK,QAAlB,EAA4B;AACjC,aAAKP,KAAL,CAAWU,OAAX,CAAmB,cAAnB;AACD;AACF,KAjC2C;;AAmC5CC,IAAAA,mBAnC4C,GAmCtB,MAAM;AAC1B,WAAKR,QAAL,CAAc,EAAEC,iBAAiB,EAAE,KAArB,EAAd;AACD,KArC2C;;AAuC5CQ,IAAAA,qBAvC4C,GAuCpB,MAAM;AAC5B,WAAKT,QAAL,CAAc,EAAEC,iBAAiB,EAAE,KAArB,EAAd;;AAEA,WAAKJ,KAAL,CAAWU,OAAX,CAAmB,WAAnB;AACD,KA3C2C,CAG1C,KAAKG,KAAL,GAAa,EACXT,iBAAiB,EAAE,KADR,EAAb,CAGD,CAPD,CASA;AACAU,EAAAA,yBAAyB,GAAG,CAC1B,oEAAuC,MACrC,KAAKX,QAAL,CAAc,EAAEC,iBAAiB,EAAE,IAArB,EAAd,CADF,EAGD,CAEDW,oBAAoB,GAAG,CACrB,wEACD;AA4BDC,EAAAA,MAAM,GAAG;AACP,UAAM,EAAEC,OAAF,EAAWC,MAAX,KAAsB,KAAKlB,KAAjC;AACA,UAAM,EAAEmB,gBAAF,EAAoBC,gBAApB,KAAyCF,MAA/C;AACA,UAAM,EAAEd,iBAAF,KAAwB,KAAKS,KAAnC;;AAEA;AACE,4CAAK,GAAG,EAAC,mBAAT;AACGM,MAAAA,gBAAgB;AACf,4CAAK,SAAS,EAAEF,OAAO,CAACtB,oBAAxB;AACE,mCAAC,eAAD;AACE,QAAA,KAAK,EAAC,SADR;AAEE,QAAA,SAAS,EAAE,IAFb;AAGE,QAAA,GAAG,EAAC,gBAHN;AAIE,QAAA,OAAO,EAAC,WAJV;AAKE,QAAA,OAAO,EAAE,KAAKO,qBALhB,aADF,CAFJ;;;;;;;AAeG,OAACiB,gBAAD;AACC,mCAAC,oBAAD;AACE,QAAA,SAAS,EAAE,IADb;AAEE,QAAA,GAAG,EAAC,cAFN;AAGE,QAAA,OAAO,EAAC,QAHV;AAIE,QAAA,SAAS,EAAEF,OAAO,CAAC1B,WAJrB;;AAME,mCAAC,mBAAD,IAAY,OAAO,EAAC,qBAApB,mBANF;AAOE,mCAAC,eAAD;AACE,QAAA,EAAE,EAAC,qBADL;AAEE,QAAA,KAAK,EAAE,6BAAC,oBAAD,IAAa,IAAI,EAAC,SAAlB,GAFT;AAGE,QAAA,KAAK,EAAC,iBAHR;AAIE,QAAA,OAAO,EAAC,QAJV;AAKE,QAAA,QAAQ,EAAE,KAAKc,wBALjB;;AAOE,mCAAC,iBAAD,IAAU,GAAG,EAAC,iBAAd,EAAgC,KAAK,EAAC,iBAAtC;AACE,+CAAKe,gBAAL,CADF,CAPF;;AAUE,mCAAC,iBAAD,IAAU,GAAG,EAAC,SAAd,EAAwB,KAAK,EAAC,SAA9B,mBAVF;;;AAaE,mCAAC,gBAAD,OAbF;AAcE,mCAAC,iBAAD,IAAU,GAAG,EAAC,OAAd,EAAsB,KAAK,EAAC,OAA5B,kBAdF;;;AAiBE,mCAAC,iBAAD,IAAU,GAAG,EAAC,QAAd,EAAuB,KAAK,EAAC,QAA7B,cAjBF,CAPF,CAhBJ;;;;;;;AA+CE,mCAAC,oBAAD;AACE,QAAA,IAAI,EAAEhB,iBADR;AAEE,QAAA,YAAY,EAAE,KAAKO,mBAFrB;AAGE,QAAA,cAAc,EAAE,KAAKC,qBAHvB,GA/CF,CADF;;;;AAuDD,GA1GD,C;;;AA6Ga;AACb,wBAAWvB,MAAX,EAAmBO,oBAAnB,CADa;AAEb;AACEsB,EAAAA,MAAM,sFADR,EAFa,C","sourcesContent":["// @flow\n\nimport Button from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport FormControl from '@material-ui/core/FormControl'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FilledInput from '@material-ui/core/FilledInput'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Select from '@material-ui/core/Select'\nimport { withStyles } from '@material-ui/core/styles'\nimport React from 'react'\nimport { createFragmentContainer, graphql } from 'react-relay'\nimport {\n  registerAuthenticationRequiredCallback,\n  unregisterAuthenticationRequiredCallback,\n} from './RequiresAuthentication'\nimport LoginDialog from './LoginDialog'\n\n//\n\nconst styles = (theme) => ({\n  formControl: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  loginButtonContainer: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n})\n\n//\n\nclass AppDrawerAccountItem extends React.Component<\n  { classes: Object, Viewer: Object, relay: Object, onClick: Function },\n  {\n    loginDialogIsOpen: boolean,\n  },\n> {\n  constructor(props: Object, context: Object) {\n    super(props, context)\n\n    this.state = {\n      loginDialogIsOpen: false,\n    }\n  }\n\n  // Handle popping open the login dialog if authentication is required\n  UNSAFE_componentWillMount() {\n    registerAuthenticationRequiredCallback(() =>\n      this.setState({ loginDialogIsOpen: true }),\n    )\n  }\n\n  componentWillUnmount() {\n    unregisterAuthenticationRequiredCallback()\n  }\n\n  _handle_onClick_Login = () => {\n    this.setState({ loginDialogIsOpen: true })\n  }\n\n  _handle_onChange_Account = (event) => {\n    const operation = event.target.value\n\n    if (operation === 'profile') {\n      this.props.onClick('/user/profile')\n    } else if (operation === 'login') {\n      this.setState({ loginDialogIsOpen: true })\n    } else if (operation === 'logout') {\n      this.props.onClick('/user/logout')\n    }\n  }\n\n  _handle_Login_Close = () => {\n    this.setState({ loginDialogIsOpen: false })\n  }\n\n  _handle_Login_NewUser = () => {\n    this.setState({ loginDialogIsOpen: false })\n\n    this.props.onClick('/user/new')\n  }\n\n  render() {\n    const { classes, Viewer } = this.props\n    const { User_IsAnonymous, User_DisplayName } = Viewer\n    const { loginDialogIsOpen } = this.state\n\n    return (\n      <div key=\"appdrawer-account\">\n        {User_IsAnonymous && (\n          <div className={classes.loginButtonContainer}>\n            <Button\n              color=\"primary\"\n              fullWidth={true}\n              key=\"account-button\"\n              variant=\"contained\"\n              onClick={this._handle_onClick_Login}\n            >\n              Log In\n            </Button>\n          </div>\n        )}\n\n        {!User_IsAnonymous && (\n          <FormControl\n            fullWidth={true}\n            key=\"account-list\"\n            variant=\"filled\"\n            className={classes.formControl}\n          >\n            <InputLabel htmlFor=\"user-account-select\">Current User</InputLabel>\n            <Select\n              id=\"user-account-select\"\n              input={<FilledInput name=\"account\" />}\n              value=\"userdisplayname\"\n              variant=\"filled\"\n              onChange={this._handle_onChange_Account}\n            >\n              <MenuItem key=\"userdisplayname\" value=\"userdisplayname\">\n                <em>{User_DisplayName}</em>\n              </MenuItem>\n              <MenuItem key=\"profile\" value=\"profile\">\n                Edit Profile\n              </MenuItem>\n              <Divider />\n              <MenuItem key=\"login\" value=\"login\">\n                Change user\n              </MenuItem>\n              <MenuItem key=\"logout\" value=\"logout\">\n                Log out\n              </MenuItem>\n            </Select>\n          </FormControl>\n        )}\n\n        <LoginDialog\n          open={loginDialogIsOpen}\n          handlerClose={this._handle_Login_Close}\n          handlerNewUser={this._handle_Login_NewUser}\n        />\n      </div>\n    )\n  }\n}\n\nexport default createFragmentContainer(\n  withStyles(styles)(AppDrawerAccountItem),\n  {\n    Viewer: graphql`\n      fragment AppDrawerAccountItem_Viewer on Viewer {\n        User_IsAnonymous\n        User_DisplayName\n      }\n    `,\n  },\n)\n"],"file":"AppDrawerAccountItem.js"}