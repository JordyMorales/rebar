{"version":3,"sources":["../../../../units/rb-account-management-webapp/components/UserProfileScreen.jsx"],"names":["styles","card","minWidth","maxWidth","cardHeaderContentStyles","UserProfileScreen","React","Component","constructor","props","context","User_DisplayName","User_PrimaryEmail","User_PrimaryPhone","Viewer","state","render","classes","User_IsAnonymous","_handle_onChange_DisplayName","_handle_onChange_PrimaryEmail","_handle_onChange_PrimaryPhone","_handle_onClick_Update","_handle_onClick_ChangePassword","event","target","value","setState","router","push","relay","UserUpdateMutation","commit","environment"],"mappings":"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","sourcesContent":["// @flow\n\nimport { withRouter } from 'found'\nimport Button from '@material-ui/core/Button'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport TextField from '@material-ui/core/TextField'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconAccountSettings from 'mdi-material-ui/AccountSettings'\nimport React from 'react'\nimport { createFragmentContainer, graphql } from 'react-relay'\nimport CompositeCardHeader, {\n  cardHeaderContentStyles,\n} from '../../rb-appbase-webapp/components/CompositeCardHeader'\nimport UserUpdateMutation from '../../rb-account-management-client/relay/UserUpdateMutation'\nimport RequiresAuthenticationNotice from '../../rb-account-management-webapp/components/RequiresAuthentication'\nimport ResponsiveContentArea from '../../rb-appbase-webapp/components/ResponsiveContentArea'\n\n//\n\nconst styles = {\n  card: {\n    minWidth: 350,\n    maxWidth: 1200,\n  },\n  ...cardHeaderContentStyles,\n}\n\n//\n\nclass UserProfileScreen extends React.Component<\n  {\n    classes: Object,\n    relay: Object,\n    router: Object,\n    Viewer: {\n      User_IsAnonymous: boolean,\n      User_DisplayName: string,\n      User_PrimaryEmail: string,\n      User_PrimaryPhone: string,\n    },\n  },\n  {\n    User_DisplayName: string,\n    User_PrimaryEmail: string,\n    User_PrimaryPhone: string,\n  },\n> {\n  constructor(props, context) {\n    super(props, context)\n\n    const {\n      User_DisplayName,\n      User_PrimaryEmail,\n      User_PrimaryPhone,\n    } = props.Viewer\n\n    this.state = { User_DisplayName, User_PrimaryEmail, User_PrimaryPhone }\n  }\n\n  _handle_onChange_DisplayName = (event) => {\n    const User_DisplayName = event.target.value\n\n    this.setState({ User_DisplayName })\n  }\n\n  _handle_onChange_PrimaryEmail = (event) => {\n    const User_PrimaryEmail = event.target.value\n\n    this.setState({ User_PrimaryEmail })\n  }\n\n  _handle_onChange_PrimaryPhone = (event) => {\n    const User_PrimaryPhone = event.target.value\n\n    this.setState({ User_PrimaryPhone })\n  }\n\n  _handle_onClick_ChangePassword = () => {\n    this.props.router.push('/user/change-secret')\n  }\n\n  _handle_onClick_Update = () => {\n    const {\n      User_DisplayName,\n      User_PrimaryEmail,\n      User_PrimaryPhone,\n    } = this.state\n    const { relay } = this.props\n\n    UserUpdateMutation.commit(\n      relay.environment,\n      User_DisplayName,\n      User_PrimaryEmail,\n      User_PrimaryPhone,\n    )\n  }\n\n  render() {\n    const { classes, Viewer } = this.props\n\n    if (Viewer.User_IsAnonymous) return <RequiresAuthenticationNotice />\n\n    const {\n      User_DisplayName,\n      User_PrimaryEmail,\n      User_PrimaryPhone,\n    } = this.state\n\n    return (\n      <ResponsiveContentArea>\n        <CompositeCardHeader\n          icon={<IconAccountSettings htmlColor=\"#003c78\" />}\n          subTitle=\"Profile &amp; settings\"\n          title=\"User\"\n        />\n\n        <Card className={classes.card}>\n          <CardContent>\n            <TextField\n              autoComplete=\"name\"\n              fullWidth={true}\n              label=\"Display Name\"\n              margin=\"normal\"\n              value={User_DisplayName}\n              variant=\"outlined\"\n              onChange={this._handle_onChange_DisplayName}\n            />\n\n            <TextField\n              autoComplete=\"email\"\n              fullWidth={true}\n              label=\"Contact email (not account identifier)\"\n              margin=\"normal\"\n              value={User_PrimaryEmail}\n              variant=\"outlined\"\n              onChange={this._handle_onChange_PrimaryEmail}\n            />\n\n            <TextField\n              autoComplete=\"tel\"\n              fullWidth={true}\n              label=\"Contact phone\"\n              margin=\"normal\"\n              value={User_PrimaryPhone}\n              variant=\"outlined\"\n              onChange={this._handle_onChange_PrimaryPhone}\n            />\n          </CardContent>\n\n          <CardActions>\n            <Button onClick={this._handle_onClick_Update}>Update</Button>\n            <Button onClick={this._handle_onClick_ChangePassword}>\n              Change password\n            </Button>\n          </CardActions>\n        </Card>\n      </ResponsiveContentArea>\n    )\n  }\n}\n\nexport default createFragmentContainer(\n  withStyles(styles)(withRouter(UserProfileScreen)),\n  {\n    Viewer: graphql`\n      fragment UserProfileScreen_Viewer on Viewer {\n        id\n        User_IsAnonymous\n        User_DisplayName\n        User_PrimaryEmail\n        User_PrimaryPhone\n      }\n    `,\n  },\n)\n"],"file":"UserProfileScreen.js"}