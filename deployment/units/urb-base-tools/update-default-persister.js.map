{"version":3,"sources":["../../../units/urb-base-tools/update-default-persister.js"],"names":["supportedPersisters","cassandra","dynamodb","memory","updateDefaultPersister","fileName","defaultPersister","console","log","path","resolve","fs","writeFileSync","join","persisterName","process","argv","persisterFileName","error","name"],"mappings":";;AAEA,wB;AACA,4B;;AAEA,MAAMA,sBAAsB;AAC1BC,aAAW,6DADe;AAE1BC,YAAU,2DAFgB;AAG1BC,UAAQ,uDAHkB,EAA5B;;;AAMA,SAASC,sBAAT,CAAiCC,QAAjC,EAA4C;AAC1C,QAAMC,mBAAmB;AACvB,YADuB;AAEvB,IAFuB;AAGvB,+BAA6BD,QAA7B,GAAwC,IAHjB;AAIvB,IAJuB;AAKvB,IALuB;AAMvB,6CANuB;AAOvB,mCAPuB,CAAzB;;;AAUAE,UAAQC,GAAR;AACE;AACEC,iBAAKC,OAAL,CAAc,oEAAd,CAFJ;;AAIAC,eAAGC,aAAH;AACE,sEADF;AAEEN,mBAAiBO,IAAjB,CAAuB,MAAvB,CAFF;AAGE,QAHF;;AAKD;;AAED,MAAMC,gBAAgBC,QAAQC,IAAR,CAAa,CAAb,CAAtB;AACA,MAAMC,oBAAoBjB,oBAAoBc,aAApB,CAA1B;;AAEA,IAAKG,qBAAqB,IAA1B,EAAiCb,uBAAwBa,iBAAxB,EAAjC;AACK;AACHV,UAAQW,KAAR,CAAe,kFAAf;AACAX,UAAQW,KAAR,CAAe,8CAAf;AACAX,UAAQW,KAAR,CAAe,oBAAf;AACA,OAAM,IAAIC,IAAV,IAAkBnB,mBAAlB,EAAwCO,QAAQW,KAAR,CAAe,OAAOC,IAAtB;AACzC","file":"update-default-persister.js","sourcesContent":["// @flow\n\nimport fs from 'fs'\nimport path from 'path'\n\nconst supportedPersisters = {\n  cassandra: '../../../urb-persister-cassandra/graphql/PersisterCassandra',\n  dynamodb: '../../../urb-persister-dynamodb/graphql/PersisterDynamoDB',\n  memory: '../../../urb-persister-memory/graphql/PersisterMemory',\n}\n\nfunction updateDefaultPersister( fileName ) {\n  const defaultPersister = [\n    '// @flow',\n    '',\n    'import Persister from \\'' + fileName + '\\'',\n    '',\n    '',\n    'const defaultPersister = new Persister( )',\n    'export default defaultPersister',\n  ]\n\n  console.log(\n    'Written: ' +\n      path.resolve( './units/_configuration/urb-base-server/graphql/defaultPersister.js' ),\n  )\n  fs.writeFileSync(\n    './units/_configuration/urb-base-server/graphql/defaultPersister.js',\n    defaultPersister.join( '\\r\\n' ),\n    'utf8',\n  )\n}\n\nconst persisterName = process.argv[2]\nconst persisterFileName = supportedPersisters[persisterName]\n\nif ( persisterFileName != null ) updateDefaultPersister( persisterFileName )\nelse {\n  console.error( 'Error: Default persister not specified. Specify default persister, for instance:' )\n  console.error( '  npm run update-default-persister -- memory' )\n  console.error( 'Valid options are:' )\n  for ( let name in supportedPersisters ) console.error( '  ' + name )\n}\n"]}