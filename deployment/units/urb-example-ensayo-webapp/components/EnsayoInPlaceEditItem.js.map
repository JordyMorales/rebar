{"version":3,"sources":["../../../../units/urb-example-ensayo-webapp/components/EnsayoInPlaceEditItem.jsx"],"names":["EnsayoInPlaceEditItem","React","Component","constructor","props","context","_handle_Update_Properties","EnsayoInPlaceEditProperties","Ensayo_Title","Ensayo_Description","Ensayo_Content","relay","Ensayo","EnsayoUpdateMutation","commit","environment","_handle_Close_Properties","setState","propertiesIsOpen","handleClickListItem","event","menuIsOpen","anchorEl","currentTarget","_handle_Menu_onClick_Edit","_handle_Menu_onClick_Delete","Viewer","EnsayoDeleteMutation","handleRequestClose","state","undefined","render"],"mappings":";;AAEA;AACA,wC;AACA,8B;AACA;;AAEA,kG;AACA,kG;;AAEA,4E;;AAEA,MAAMA,qBAAN,SAAoCC,gBAAMC;;;;;;;;;;;AAWxC;AACAC,cAAaC,KAAb,EAA4BC,OAA5B,EAA8C;AAC5C,UAAOD,KAAP,EAAcC,OAAd,EAD4C;;;;;;;;;AAU9CC,6BAV8C,GAUlBC,+BAA+B;AACzD,YAAM;AACJC,oBADI;AAEJC,0BAFI;AAGJC,sBAHI;AAIFH,iCAJJ;AAKA,YAAM,EAAEI,KAAF,EAASC,MAAT,KAAoB,KAAKR,KAA/B;;AAEAS,qCAAqBC,MAArB;AACEH,YAAMI,WADR;AAEEH,YAFF;AAGEJ,kBAHF;AAIEC,wBAJF;AAKEC,oBALF;;AAOD,KAzB6C;;AA2B9CM,4BA3B8C,GA2BnB,MAAM;AAC/B,WAAKC,QAAL,CAAc,EAAEC,kBAAkB,KAApB,EAAd;AACD,KA7B6C;;AA+B9CC,uBA/B8C,GA+BxBC,SAAS;AAC7B,WAAKH,QAAL,CAAc,EAAEI,YAAY,IAAd,EAAoBC,UAAUF,MAAMG,aAApC,EAAd;AACD,KAjC6C;;AAmC9CC,6BAnC8C,GAmClBJ,SAAS;AACnC,WAAKH,QAAL,CAAc,EAAEI,YAAY,KAAd,EAAqBH,kBAAkB,IAAvC,EAAd;AACD,KArC6C;;AAuC9CO,+BAvC8C,GAuChBL,SAAS;AACrC,WAAKH,QAAL,CAAc,EAAEI,YAAY,KAAd,EAAd;;AAEA,YAAM,EAAEV,KAAF,EAASe,MAAT,EAAiBd,MAAjB,KAA4B,KAAKR,KAAvC;;AAEAuB,qCAAqBb,MAArB,CAA6BH,MAAMI,WAAnC,EAAgDW,MAAhD,EAAwDd,MAAxD;AACD,KA7C6C;;AA+C9CgB,sBA/C8C,GA+CzB,MAAM;AACzB,WAAKX,QAAL,CAAc,EAAEI,YAAY,KAAd,EAAd;AACD,KAjD6C,CAG5C,KAAKQ,KAAL,GAAa,EACXP,UAAUQ,SADC,EAEXT,YAAY,KAFD,EAGXH,kBAAkB,KAHP,EAAb,CAKD;;AA2CDa,WAAS;AACP,UAAM;AACJvB,kBADI;AAEJC,wBAFI;AAGJC,oBAHI;AAIF,SAAKN,KAAL,CAAWQ,MAJf;AAKA,UAAM,EAAEM,gBAAF,KAAuB,KAAKW,KAAlC;;AAEA;AACE;AACE,sCAAC,cAAD;AACE,wBADF;AAEE,6BAAc,MAFhB;AAGE,6BAAc,WAHhB;AAIE,qBAAS,KAAKV,mBAJhB;;AAME,wCAAC,kBAAD,IAAc,SAASX,YAAvB,EAAqC,WAAWC,kBAAhD,GANF,CADF;;AASE,sCAAC,cAAD;AACE,gBAAG,WADL;AAEE,sBAAU,KAAKoB,KAAL,CAAWP,QAFvB;AAGE,kBAAM,KAAKO,KAAL,CAAWR,UAHnB;AAIE,4BAAgB,KAAKO,kBAJvB;;AAME,wCAAC,cAAD;AACE,mBAAI,MADN;AAEE,uBAASR,SAAS,KAAKI,yBAAL,CAAgCJ,KAAhC,CAFpB,WANF;;;;AAYE,wCAAC,cAAD;AACE,mBAAI,QADN;AAEE,uBAASA,SAAS,KAAKK,2BAAL,CAAkCL,KAAlC,CAFpB,aAZF,CATF;;;;;AA4BGF;AACC,sCAAC,qCAAD;AACE,wBAAcV,YADhB;AAEE,8BAAoBC,kBAFtB;AAGE,0BAAgBC,cAHlB;AAIE,yBAAe,KAAKJ,yBAJtB;AAKE,wBAAc,KAAKU,wBALrB,GA7BJ,CADF;;;;;AAwCD,GApGD,C;;;AAuGa,yCAAyBhB,qBAAzB,EAAgD;AAC7D0B,+FAD6D;;;;;AAM7Dd,+FAN6D,EAAhD,C","file":"EnsayoInPlaceEditItem.js","sourcesContent":["// @flow\n\nimport { ListItem, ListItemText } from 'material-ui/List'\nimport Menu, { MenuItem } from 'material-ui/Menu'\nimport React from 'react'\nimport { createFragmentContainer, graphql } from 'react-relay'\n\nimport EnsayoDeleteMutation from '../../urb-example-ensayo-client/relay/EnsayoDeleteMutation'\nimport EnsayoUpdateMutation from '../../urb-example-ensayo-client/relay/EnsayoUpdateMutation'\n\nimport EnsayoInPlaceEditProperties from './EnsayoInPlaceEditProperties'\n\nclass EnsayoInPlaceEditItem extends React.Component<\n  {\n    Viewer: Object,\n    Ensayo: Object,\n    relay: Object\n  },\n  {\n    anchorEl: ?Object,\n    menuIsOpen: boolean,\n    propertiesIsOpen: boolean\n  }\n> {\n  constructor( props: Object, context: Object ) {\n    super( props, context )\n\n    this.state = {\n      anchorEl: undefined,\n      menuIsOpen: false,\n      propertiesIsOpen: false,\n    }\n  }\n\n  _handle_Update_Properties = EnsayoInPlaceEditProperties => {\n    const {\n      Ensayo_Title,\n      Ensayo_Description,\n      Ensayo_Content,\n    } = EnsayoInPlaceEditProperties\n    const { relay, Ensayo } = this.props\n\n    EnsayoUpdateMutation.commit(\n      relay.environment,\n      Ensayo,\n      Ensayo_Title,\n      Ensayo_Description,\n      Ensayo_Content\n    )\n  }\n\n  _handle_Close_Properties = () => {\n    this.setState({ propertiesIsOpen: false })\n  }\n\n  handleClickListItem = event => {\n    this.setState({ menuIsOpen: true, anchorEl: event.currentTarget })\n  }\n\n  _handle_Menu_onClick_Edit = event => {\n    this.setState({ menuIsOpen: false, propertiesIsOpen: true })\n  }\n\n  _handle_Menu_onClick_Delete = event => {\n    this.setState({ menuIsOpen: false })\n\n    const { relay, Viewer, Ensayo } = this.props\n\n    EnsayoDeleteMutation.commit( relay.environment, Viewer, Ensayo )\n  }\n\n  handleRequestClose = () => {\n    this.setState({ menuIsOpen: false })\n  }\n\n  render() {\n    const {\n      Ensayo_Title,\n      Ensayo_Description,\n      Ensayo_Content,\n    } = this.props.Ensayo\n    const { propertiesIsOpen } = this.state\n\n    return (\n      <div>\n        <ListItem\n          button\n          aria-haspopup=\"true\"\n          aria-controls=\"lock-menu\"\n          onClick={this.handleClickListItem}\n        >\n          <ListItemText primary={Ensayo_Title} secondary={Ensayo_Description} />\n        </ListItem>\n        <Menu\n          id=\"lock-menu\"\n          anchorEl={this.state.anchorEl}\n          open={this.state.menuIsOpen}\n          onRequestClose={this.handleRequestClose}\n        >\n          <MenuItem\n            key=\"edit\"\n            onClick={event => this._handle_Menu_onClick_Edit( event )}\n          >\n            Edit\n          </MenuItem>\n          <MenuItem\n            key=\"delete\"\n            onClick={event => this._handle_Menu_onClick_Delete( event )}\n          >\n            Delete\n          </MenuItem>\n        </Menu>\n        {propertiesIsOpen && (\n          <EnsayoInPlaceEditProperties\n            Ensayo_Title={Ensayo_Title}\n            Ensayo_Description={Ensayo_Description}\n            Ensayo_Content={Ensayo_Content}\n            handlerUpdate={this._handle_Update_Properties}\n            handlerClose={this._handle_Close_Properties}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default createFragmentContainer( EnsayoInPlaceEditItem, {\n  Viewer: graphql`\n    fragment EnsayoInPlaceEditItem_Viewer on Viewer {\n      id\n    }\n  `,\n  Ensayo: graphql`\n    fragment EnsayoInPlaceEditItem_Ensayo on Ensayo {\n      id\n      Ensayo_Title\n      Ensayo_Description\n      Ensayo_Content\n    }\n  `,\n})\n"]}