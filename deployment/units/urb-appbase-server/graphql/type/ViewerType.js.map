{"version":3,"sources":["../../../../../units/urb-appbase-server/graphql/type/ViewerType.js"],"names":["GraphQLObjectType","name","interfaces","NodeInterface","isTypeOf","object","User","fields","id","User_IsAnonymous","type","GraphQLBoolean","resolve","obj","defaultPersister","uuidEquals","uuidNull","UserToken2","GraphQLString","User_DisplayName","User_Email","User_PhoneNumberMobile","ObjectUserPermissions","ObjectUserPermissionsConnection","connectionType","args","connectionArgs","ObjectUserPermission_Name","GraphQLNonNull","context","rootValue","objectManager","arr","getObjectList","ObjectUserPermission","ObjectUserPermissionType","GraphQLID","parent","local_id","uuidFromString","getOneObject","_materialized_view","ResourceUserAllowances","ResourceUserAllowancesConnection","ResourceUserAllowance","ResourceUserAllowanceType","_ViewerFields"],"mappings":"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","sourcesContent":["// @flow\n\nimport {\n  GraphQLBoolean,\n  GraphQLID,\n  GraphQLNonNull,\n  GraphQLString,\n  GraphQLObjectType,\n} from 'graphql'\nimport { connectionArgs, connectionFromArray, fromGlobalId, globalIdField } from 'graphql-relay'\n\nimport defaultPersister from '../../../_configuration/urb-base-server/graphql/defaultPersister'\nimport NodeInterface from '../NodeInterface'\nimport _ViewerFields from '../../../_configuration/urb-base-server/graphql/_ViewerFields'\nimport User from '../../../_configuration/urb-base-server/graphql/model/User'\n\nimport ObjectUserPermissionsConnection from './ObjectUserPermissionsConnection'\nimport ObjectUserPermissionType from './ObjectUserPermissionType'\nimport ResourceUserAllowancesConnection from './ResourceUserAllowancesConnection'\nimport ResourceUserAllowanceType from './ResourceUserAllowanceType'\n\nexport default new GraphQLObjectType({\n  name: 'Viewer',\n  interfaces: [ NodeInterface ],\n  isTypeOf: object => object instanceof User,\n  fields: {\n    id: globalIdField( 'Viewer' ),\n    User_IsAnonymous: {\n      type: GraphQLBoolean,\n      resolve: obj => defaultPersister.uuidEquals( obj.id, defaultPersister.uuidNull() ),\n    },\n    UserToken2: { type: GraphQLString, resolve: obj => obj.UserToken2 },\n    User_DisplayName: {\n      type: GraphQLString,\n      resolve: obj => obj.User_DisplayName,\n    },\n    User_Email: { type: GraphQLString, resolve: obj => obj.User_Email },\n    User_PhoneNumberMobile: {\n      type: GraphQLString,\n      resolve: obj => obj.User_PhoneNumberMobile,\n    },\n\n    ObjectUserPermissions: {\n      type: ObjectUserPermissionsConnection.connectionType,\n\n      args: {\n        ...connectionArgs,\n        ObjectUserPermission_Name: { type: new GraphQLNonNull( GraphQLString ) },\n      },\n\n      resolve: async( obj, { ...args }, context, { rootValue: objectManager }) => {\n        const { ObjectUserPermission_Name } = args\n        const arr = await objectManager.getObjectList( 'ObjectUserPermission', {\n          ObjectUserPermission_Name,\n        })\n        return connectionFromArray( arr, args )\n      },\n    },\n\n    ObjectUserPermission: {\n      type: ObjectUserPermissionType,\n\n      args: { ...{ id: { type: GraphQLID } } },\n\n      resolve: async( parent, { id }, context, { rootValue: objectManager }) => {\n        const local_id = objectManager.uuidFromString( 'ObjectUserPermission', fromGlobalId( id ).id )\n\n        return await objectManager.getOneObject( 'ObjectUserPermission', {\n          id: local_id,\n          _materialized_view: 'ObjectUserPermission_by_ID',\n        })\n      },\n    },\n\n    ResourceUserAllowances: {\n      type: ResourceUserAllowancesConnection.connectionType,\n\n      args: { ...connectionArgs },\n\n      resolve: async( obj, { ...args }, context, { rootValue: objectManager }) => {\n        const arr = await objectManager.getObjectList( 'ResourceUserAllowance', {})\n        return connectionFromArray( arr, args )\n      },\n    },\n\n    ResourceUserAllowance: {\n      type: ResourceUserAllowanceType,\n\n      args: { ...{ id: { type: GraphQLID } } },\n\n      resolve: async( parent, { id }, context, { rootValue: objectManager }) => {\n        const local_id = objectManager.uuidFromString( 'ResourceUserAllowance', fromGlobalId( id ).id )\n\n        return await objectManager.getOneObject( 'ResourceUserAllowance', {\n          id: local_id,\n\n          _materialized_view: 'ResourceUserAllowance_by_ID',\n        })\n      },\n    },\n\n    ..._ViewerFields,\n  },\n})\n"],"file":"ViewerType.js"}