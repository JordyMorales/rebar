{"version":3,"sources":["../../../../units/rb-example-translaticiarum-client/relay/TranslaticiarumAddMutation.js"],"names":["mutation","sharedUpdater","store","user","TranslaticiarumsEdge","userProxy","get","id","connection","ConnectionHandler","getConnection","insertEdgeAfter","nextClientMutationId","commit","environment","Translaticiarum_Start","Translaticiarum_Stop","Translaticiarum_Description","clientMutationId","variables","input","updater","payload","getRootField","getLinkedRecord","optimisticUpdater","aTranslaticiarum","create","setValue","setLinkedRecord"],"mappings":";;AAEA;AACA,6C,CAHA;;AAKA,MAAMA,QAAQ,sFAAd;;;;;;;;;;;;;;;;;;;AAmBA,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,IAA9B,EAAoCC,oBAApC,EAA0D;AACxD,QAAMC,SAAS,GAAGH,KAAK,CAACI,GAAN,CAAUH,IAAI,CAACI,EAAf,CAAlB;;AAEA,QAAMC,UAAU,GAAGC,gCAAkBC,aAAlB;AACjBL,EAAAA,SADiB;AAEjB,wCAFiB,CAAnB;;AAIA,MAAIG,UAAJ,EAAgB;AACdC,oCAAkBE,eAAlB,CAAkCH,UAAlC,EAA8CJ,oBAA9C;AACD;AACF;;AAED,IAAIQ,oBAAoB,GAAG,CAA3B;;AAEA,SAASC,MAAT;AACEC,WADF;AAEEX,IAFF;AAGEY,qBAHF;AAIEC,oBAJF;AAKEC,2BALF;AAME;AACA,QAAMC,gBAAgB,GAAGN,oBAAoB,EAA7C;;AAEA,SAAO,gCAAeE,WAAf,EAA4B;AACjCd,IAAAA,QADiC;AAEjCmB,IAAAA,SAAS,EAAE;AACTC,MAAAA,KAAK,EAAE;AACLL,QAAAA,qBADK;AAELC,QAAAA,oBAFK;AAGLC,QAAAA,2BAHK;AAILC,QAAAA,gBAAgB,EAAG,GAAEA,gBAAiB,EAJjC,EADE,EAFsB;;;;AAWjCG,IAAAA,OAAO,CAACnB,KAAD,EAAQ;AACb,YAAMoB,OAAO,GAAGpB,KAAK,CAACqB,YAAN,CAAmB,oBAAnB,CAAhB;AACAtB,MAAAA,aAAa;AACXC,MAAAA,KADW;AAEXC,MAAAA,IAFW;AAGXmB,MAAAA,OAAO,CAACE,eAAR,CAAwB,sBAAxB,CAHW,CAAb;;AAKD,KAlBgC;;AAoBjCC,IAAAA,iBAAiB,CAACvB,KAAD,EAAQ;AACvB,YAAMK,EAAE,GAAI,6CAA4CW,gBAAiB,EAAzE;AACA,YAAMQ,gBAAgB,GAAGxB,KAAK,CAACyB,MAAN,CAAapB,EAAb,EAAiB,iBAAjB,CAAzB;AACAmB,MAAAA,gBAAgB,CAACE,QAAjB,CAA0Bb,qBAA1B,EAAiD,uBAAjD;AACAW,MAAAA,gBAAgB,CAACE,QAAjB,CAA0BZ,oBAA1B,EAAgD,sBAAhD;AACAU,MAAAA,gBAAgB,CAACE,QAAjB;AACEX,MAAAA,2BADF;AAEE,mCAFF;;AAIAS,MAAAA,gBAAgB,CAACE,QAAjB,CAA0BrB,EAA1B,EAA8B,IAA9B;;AAEA,YAAMH,oBAAoB,GAAGF,KAAK,CAACyB,MAAN;AAC1B,wDAAiDT,gBAAiB,EADxC;AAE3B,4BAF2B,CAA7B;;AAIAd,MAAAA,oBAAoB,CAACyB,eAArB,CAAqCH,gBAArC,EAAuD,MAAvD;;AAEAzB,MAAAA,aAAa,CAACC,KAAD,EAAQC,IAAR,EAAcC,oBAAd,CAAb;AACD,KAtCgC,EAA5B,CAAP;;AAwCD,C;;AAEc,EAAES,MAAF,E","sourcesContent":["// @flow weak\n\nimport { commitMutation, graphql } from 'react-relay'\nimport { ConnectionHandler } from 'relay-runtime'\n\nconst mutation = graphql`\n  mutation TranslaticiarumAddMutation($input: TranslaticiarumAddInput!) {\n    TranslaticiarumAdd(input: $input) {\n      Viewer {\n        id\n      }\n      TranslaticiarumsEdge {\n        cursor\n        node {\n          id\n          Translaticiarum_Start\n          Translaticiarum_Stop\n          Translaticiarum_Description\n        }\n      }\n    }\n  }\n`\n\nfunction sharedUpdater(store, user, TranslaticiarumsEdge) {\n  const userProxy = store.get(user.id)\n\n  const connection = ConnectionHandler.getConnection(\n    userProxy,\n    'TranslaticiarumList_Translaticiarums',\n  )\n  if (connection) {\n    ConnectionHandler.insertEdgeAfter(connection, TranslaticiarumsEdge)\n  }\n}\n\nlet nextClientMutationId = 0\n\nfunction commit(\n  environment,\n  user,\n  Translaticiarum_Start,\n  Translaticiarum_Stop,\n  Translaticiarum_Description,\n) {\n  const clientMutationId = nextClientMutationId++\n\n  return commitMutation(environment, {\n    mutation,\n    variables: {\n      input: {\n        Translaticiarum_Start,\n        Translaticiarum_Stop,\n        Translaticiarum_Description,\n        clientMutationId: `${clientMutationId}`,\n      },\n    },\n\n    updater(store) {\n      const payload = store.getRootField('TranslaticiarumAdd')\n      sharedUpdater(\n        store,\n        user,\n        payload.getLinkedRecord('TranslaticiarumsEdge'),\n      )\n    },\n\n    optimisticUpdater(store) {\n      const id = `client:TranslaticiarumAdd:Translaticiarum:${clientMutationId}`\n      const aTranslaticiarum = store.create(id, 'Translaticiarum')\n      aTranslaticiarum.setValue(Translaticiarum_Start, 'Translaticiarum_Start')\n      aTranslaticiarum.setValue(Translaticiarum_Stop, 'Translaticiarum_Stop')\n      aTranslaticiarum.setValue(\n        Translaticiarum_Description,\n        'Translaticiarum_Description',\n      )\n      aTranslaticiarum.setValue(id, 'id')\n\n      const TranslaticiarumsEdge = store.create(\n        `client:TranslaticiarumAdd:TranslaticiarumsEdge:${clientMutationId}`,\n        'TranslaticiarumsEdge',\n      )\n      TranslaticiarumsEdge.setLinkedRecord(aTranslaticiarum, 'node')\n\n      sharedUpdater(store, user, TranslaticiarumsEdge)\n    },\n  })\n}\n\nexport default { commit }\n"],"file":"TranslaticiarumAddMutation.js"}