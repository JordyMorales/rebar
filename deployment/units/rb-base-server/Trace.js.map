{"version":3,"sources":["../../../units/rb-base-server/Trace.js"],"names":["debugLogColors","chalk","bgRed","greenBright","yellowBright","magentaBright","cyanBright","whiteBright","bgGreen","blueBright","bgYellow","bgBlue","bgMagenta","bgCyan","redBright","debugLogColorsLength","length","applyDebugColorCache","applyDebugColor","str","cachedColor","hash","Error","i","chr","charCodeAt","debugColor","Math","abs","Trace","constructor","level","next","extraLevels","add","description","object","currentLevel","preamble","gray","strContent","util","inspect","depth","breakLength","colors","arrContent","replace","split","content","console","log"],"mappings":"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","sourcesContent":["// @flow\n\nimport util from 'util'\n\nimport chalk from 'chalk'\n\nconst debugLogColors = [\n  //chalk.bgRed.redBright,\n  chalk.bgRed.greenBright,\n  chalk.bgRed.yellowBright,\n  //chalk.bgRed.blueBright,\n  chalk.bgRed.magentaBright,\n  chalk.bgRed.cyanBright,\n  chalk.bgRed.whiteBright,\n  //\n  //chalk.bgGreen.redBright,\n  //chalk.bgGreen.greenBright,\n  chalk.bgGreen.yellowBright,\n  chalk.bgGreen.blueBright,\n  //chalk.bgGreen.magentaBright,\n  //chalk.bgGreen.cyanBright,\n  chalk.bgGreen.whiteBright,\n  //\n  //chalk.bgYellow.redBright,\n  //chalk.bgYellow.greenBright,\n  //chalk.bgYellow.yellowBright,\n  chalk.bgYellow.blueBright,\n  //chalk.bgYellow.magentaBright,\n  //chalk.bgYellow.cyanBright,\n  //chalk.bgYellow.whiteBright,\n  //\n  //chalk.bgBlue.redBright,\n  chalk.bgBlue.greenBright,\n  chalk.bgBlue.yellowBright,\n  //chalk.bgBlue.blueBright,\n  chalk.bgBlue.magentaBright,\n  chalk.bgBlue.cyanBright,\n  chalk.bgBlue.whiteBright,\n  //\n  //chalk.bgMagenta.redBright,\n  chalk.bgMagenta.greenBright,\n  chalk.bgMagenta.yellowBright,\n  //chalk.bgMagenta.blueBright,\n  //chalk.bgMagenta.magentaBright,\n  //chalk.bgMagenta.cyanBright,\n  chalk.bgMagenta.whiteBright,\n  //\n  chalk.bgCyan.redBright,\n  //chalk.bgCyan.greenBright,\n  chalk.bgCyan.yellowBright,\n  //chalk.bgCyan.blueBright,\n  //chalk.bgCyan.magentaBright,\n  //chalk.bgCyan.cyanBright,\n  chalk.bgCyan.whiteBright\n]\n\nconst debugLogColorsLength = debugLogColors.length\n\nconst applyDebugColorCache = {}\nfunction applyDebugColor(str: string) {\n  // Cached?\n  const cachedColor = applyDebugColorCache[str]\n  if (cachedColor) {\n    return cachedColor(str)\n  }\n\n  let hash: number = 0\n  if (str.length === 0) throw new Error('assert')\n  for (let i = 0; i < str.length; i++) {\n    const chr = str.charCodeAt(i)\n    hash = (hash << 5) - hash + chr\n    hash |= 0 // Convert to 32bit integer\n  }\n\n  const debugColor = debugLogColors[Math.abs(hash) % debugLogColorsLength]\n  applyDebugColorCache[str] = debugColor\n\n  return debugColor(str)\n}\n\nexport default class Trace {\n  level: number\n\n  constructor() {\n    this.level = 0\n  }\n\n  next(extraLevels?: number): Trace {\n    const next = new Trace()\n    next.level = this.level + 1\n\n    if (extraLevels) {\n      next.level += extraLevels\n    }\n\n    return next\n  }\n\n  add(description: string, object: Object, extraLevels?: number) {\n    const currentLevel: number = this.level + (extraLevels ? extraLevels : 0)\n\n    let preamble = ''\n\n    for (let level = currentLevel; level > 0; level--) {\n      preamble += chalk.gray('â•Ž') + '   '\n    }\n\n    const strContent =\n      applyDebugColor(description) +\n      ' ' +\n      util.inspect(object, { depth: 1000, breakLength: 150, colors: true })\n    const arrContent = strContent.replace('\\r', '').split('\\n')\n\n    for (let content of arrContent) {\n      console.log(preamble + content)\n    }\n  }\n}\n"],"file":"Trace.js"}